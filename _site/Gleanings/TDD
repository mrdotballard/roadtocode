In this context, it’s helpful to have a set of guidelines on when we should test first (or test at all). Here are some suggestions based on my own experience:

    When a test is especially short or simple compared to the application code it tests, lean toward writing the test first.
    When the desired behavior isn’t yet crystal clear, lean toward writing the application code first, then write a test to codify the result.
    Whenever a bug is found, write a test to reproduce it and protect against regressions, then write the application code to fix it.
    Write tests before refactoring code, focusing on testing error-prone code that’s especially likely to break.
